<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.server.dao.mapper.GoodsMapper" >
  <resultMap id="BaseResultMap" type="com.server.pojo.entity.Goods" >
    <id column="GOODSID" property="goodsid" jdbcType="VARCHAR" />
    <result column="GOODSCOMPANY" property="goodscompany" jdbcType="VARCHAR" />
    <result column="GOODSCODE" property="goodscode" jdbcType="VARCHAR" />
    <result column="GOODSNAME" property="goodsname" jdbcType="VARCHAR" />
    <result column="GOODSDETAIL" property="goodsdetail" jdbcType="VARCHAR" />
    <result column="GOODSUNITS" property="goodsunits" jdbcType="VARCHAR" />
    <result column="GOODSCLASS" property="goodsclass" jdbcType="VARCHAR" />
    <result column="GOODSIMAGE" property="goodsimage" jdbcType="VARCHAR" />
    <result column="GOODSSTATUE" property="goodsstatue" jdbcType="VARCHAR" />
    <result column="CREATETIME" property="createtime" jdbcType="VARCHAR" />
    <result column="UPDTIME" property="updtime" jdbcType="VARCHAR" />
    <result column="CREATOR" property="creator" jdbcType="VARCHAR" />
    <result column="UPDOR" property="updor" jdbcType="VARCHAR" />
    <!-- 商品类别 -->
    <association property="gClass" javaType="com.server.pojo.entity.Goodsclass">
    	<id column="GOODSCLASS" property="goodsclassid" jdbcType="VARCHAR" />
	    <result column="GOODSCLASSCODE" property="goodsclasscode" jdbcType="VARCHAR" />
	    <result column="GOODSCLASSNAME" property="goodsclassname" jdbcType="VARCHAR" />
	    <result column="GOODSCLASSPARENT" property="goodsclassparent" jdbcType="VARCHAR" />
	    <result column="GOODSCLASSDETAIL" property="goodsclassdetail" jdbcType="VARCHAR" />
	    <result column="GOODSCLASSSTATUE" property="goodsclassstatue" jdbcType="VARCHAR" />
    </association>
    <!-- 商品价格 -->
    <collection property="pricesList" ofType="com.server.pojo.entity.Prices">
    	<id column="PRICESID" property="pricesid" jdbcType="VARCHAR" />
	    <result column="PRICESGOODS" property="pricesgoods" jdbcType="VARCHAR" />
	    <result column="PRICESCLASS" property="pricesclass" jdbcType="VARCHAR" />
	    <result column="PRICESLEVEL" property="priceslevel" jdbcType="DECIMAL" />
	    <result column="PRICESPRICE" property="pricesprice" jdbcType="FLOAT" />
	    <result column="PRICESUNIT" property="pricesunit" jdbcType="VARCHAR" />
	    <result column="PRICESPRICE2" property="pricesprice2" jdbcType="FLOAT" />
	    <result column="PRICESUNIT2" property="pricesunit2" jdbcType="VARCHAR" />
	    <result column="CREATETIME" property="createtime" jdbcType="VARCHAR" />
	    <result column="UPDTIME" property="updtime" jdbcType="VARCHAR" />
	    <result column="CREATOR" property="creator" jdbcType="VARCHAR" />
	    <result column="UPDOR" property="updor" jdbcType="VARCHAR" />
    </collection>
  </resultMap>
  <sql id="Base_Column_List" >
    GOODSID, GOODSCOMPANY, GOODSCODE, GOODSNAME, GOODSDETAIL, GOODSUNITS, GOODSCLASS, 
    GOODSIMAGE, GOODSSTATUE, CREATETIME, UPDTIME, CREATOR, UPDOR
  </sql>
  <!-- 根据条件查询 -->
  <select id="selectByCondition" resultMap="BaseResultMap" parameterType="com.server.pojo.entity.Goods" >
    select
		goods.*,
		prices.pricesid
	from goods
	left outer join prices
	on prices.pricesgoods = goods.goodsid
    where goodscompany = #{goodscompany}
    <if test="goodsstatue != null and goodsstatue != ''">
    	and goodsstatue = #{goodsstatue}
    </if>
  </select>
  <!-- 根据主键查询商品和价格和类名 -->
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
		goods.*,
		prices.*,
		goodsclass.goodsclassname 
	from goods
	left outer join prices 
	on prices.pricesgoods = goods.goodsid
	left outer join goodsclass
	on goods.goodsclass = goodsclass.goodsclassid
    where goods.GOODSID = #{goodsid,jdbcType=VARCHAR}
  </select>
  <!-- 根据主键删除 -->
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    delete from GOODS
    where GOODSID = #{goodsid,jdbcType=VARCHAR}
  </delete>
  <!-- 选择性添加 -->
  <insert id="insertSelective" parameterType="com.server.pojo.entity.Goods" >
    insert into GOODS
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="goodsid != null" >
        GOODSID,
      </if>
      <if test="goodscompany != null" >
        GOODSCOMPANY,
      </if>
      <if test="goodscode != null" >
        GOODSCODE,
      </if>
      <if test="goodsname != null" >
        GOODSNAME,
      </if>
      <if test="goodsdetail != null" >
        GOODSDETAIL,
      </if>
      <if test="goodsunits != null" >
        GOODSUNITS,
      </if>
      <if test="goodsclass != null" >
        GOODSCLASS,
      </if>
      <if test="goodsimage != null" >
        GOODSIMAGE,
      </if>
      <if test="goodsstatue != null" >
        GOODSSTATUE,
      </if>
      <if test="createtime != null" >
        CREATETIME,
      </if>
      <if test="updtime != null" >
        UPDTIME,
      </if>
      <if test="creator != null" >
        CREATOR,
      </if>
      <if test="updor != null" >
        UPDOR,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="goodsid != null" >
        #{goodsid,jdbcType=VARCHAR},
      </if>
      <if test="goodscompany != null" >
        #{goodscompany,jdbcType=VARCHAR},
      </if>
      <if test="goodscode != null" >
        #{goodscode,jdbcType=VARCHAR},
      </if>
      <if test="goodsname != null" >
        #{goodsname,jdbcType=VARCHAR},
      </if>
      <if test="goodsdetail != null" >
        #{goodsdetail,jdbcType=VARCHAR},
      </if>
      <if test="goodsunits != null" >
        #{goodsunits,jdbcType=VARCHAR},
      </if>
      <if test="goodsclass != null" >
        #{goodsclass,jdbcType=VARCHAR},
      </if>
      <if test="goodsimage != null" >
        #{goodsimage,jdbcType=VARCHAR},
      </if>
      <if test="goodsstatue != null" >
        #{goodsstatue,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null" >
        #{createtime,jdbcType=VARCHAR},
      </if>
      <if test="updtime != null" >
        #{updtime,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=VARCHAR},
      </if>
      <if test="updor != null" >
        #{updor,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <!-- 根据主键选择性修改 -->
  <update id="updateByPrimaryKeySelective" parameterType="com.server.pojo.entity.Goods" >
    update GOODS
    <set >
      <if test="goodscompany != null" >
        GOODSCOMPANY = #{goodscompany,jdbcType=VARCHAR},
      </if>
      <if test="goodscode != null" >
        GOODSCODE = #{goodscode,jdbcType=VARCHAR},
      </if>
      <if test="goodsname != null" >
        GOODSNAME = #{goodsname,jdbcType=VARCHAR},
      </if>
      <if test="goodsdetail != null" >
        GOODSDETAIL = #{goodsdetail,jdbcType=VARCHAR},
      </if>
      <if test="goodsunits != null" >
        GOODSUNITS = #{goodsunits,jdbcType=VARCHAR},
      </if>
      <if test="goodsclass != null" >
        GOODSCLASS = #{goodsclass,jdbcType=VARCHAR},
      </if>
      <if test="goodsimage != null" >
        GOODSIMAGE = #{goodsimage,jdbcType=VARCHAR},
      </if>
      <if test="goodsstatue != null" >
        GOODSSTATUE = #{goodsstatue,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null" >
        CREATETIME = #{createtime,jdbcType=VARCHAR},
      </if>
      <if test="updtime != null" >
        UPDTIME = #{updtime,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        CREATOR = #{creator,jdbcType=VARCHAR},
      </if>
      <if test="updor != null" >
        UPDOR = #{updor,jdbcType=VARCHAR},
      </if>
    </set>
    where GOODSID = #{goodsid,jdbcType=VARCHAR}
  </update>
</mapper>